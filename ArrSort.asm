@R1
    D=M
    @swapindex
    M=D
    @R2
    D=M
    @counter
    M=D
    @LOOP
    0;JMP

(SWAP)
    @R2
    MD=M-1
    @STOP
    D;JLE
    @counter
    M=D
    @R1
    M=M-D
    @swapornot
    D=M
    @NEXTPASS
    D;JLE
    @R1
    A=M
    D=M
    @swapindex
    A=M
    MD=M+D
    @R1
    A=M
    MD=D-M
    @swapindex
    A=M
    M=M-D

(NEXTPASS)
    @swapornot
    M=0
    @R1
    MD=M+1
    @swapindex
    M=D

(LOOP)
    @R1
    A=M
    D=M
    @R0
    M=D

(FINDMININDEX)
    @counter
    MD=M-1
    @SWAP
    D;JLE
    @R0
    D=M
    @POS
    D;JGE

(NEG)
    @R1
    M=M+1
    A=M
    D=M
    @FINDMININDEX
    D;JGE
    @R0
    D=M-D
    @NEWMIN
    D;JGT
    @FINDMININDEX
    0;JMP
    
(POS)
    @R1
    M=M+1
    A=M
    D=M
    @NEWMIN
    D;JLT
    @R0
    D=M-D
    @NEWMIN
    D;JGT
    @FINDMININDEX
    0;JMP
    
(NEWMIN)
    @R1
    D=M
    @swapindex
    M=D
    A=M
    D=M
    @R0
    M=D
    @swapornot
    M=1
    @FINDMININDEX
    0;JMP

(STOP)
    @R0
    M=-1

(END)
    @END
    0;JMP